<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
	<title>Plush Maker Farm</title>
	<style>
		@import url("https://fonts.googleapis.com/css2?family=Lexend:wght@400;600;700&display=swap");

		:root{
			--bg: #f6efe4;
			--bg-dark: #e7dac6;
			--ink: #1d1b19;
			--soil: #d4b08a;
			--soil-dark: #b7926c;
			--growing: #7fb2d9;
			--ready: #f3dc8a;
			--accent: #f08e6c;
			--accent-dark: #dd6f49;
			--card: #fff8ed;
			--shadow: rgba(30, 20, 10, 0.18);
			--cotton: #cfe7ff;
			--flax: #fff1b8;
			--memoria: #f6d7ff;
		}

		*{
			box-sizing: border-box;
		}

		html, body{
			margin: 0;
			height: 100%;
			background: var(--bg);
			color: var(--ink);
			font-family: "Lexend", "Trebuchet MS", sans-serif;
		}

		body{
			display: flex;
			justify-content: center;
		}

		.app{
			width: min(420px, 100%);
			min-height: 100dvh;
			padding: 20px 18px 28px;
			background:
				radial-gradient(120px 120px at 20% 10%, rgba(255,255,255,0.65), transparent 70%),
				radial-gradient(160px 160px at 90% 0%, rgba(255,226,189,0.7), transparent 72%),
				linear-gradient(180deg, var(--bg) 0%, var(--bg-dark) 100%);
			position: relative;
			overflow: hidden;
		}

		.app::before,
		.app::after{
			content: "";
			position: absolute;
			inset: auto;
			opacity: 0.25;
			pointer-events: none;
		}

		.app::before{
			width: 200px;
			height: 200px;
			border-radius: 50%;
			background: #ffd7bf;
			top: -60px;
			left: -70px;
		}

		.app::after{
			width: 220px;
			height: 220px;
			border-radius: 50%;
			background: #f7eac7;
			bottom: -90px;
			right: -80px;
		}

		.header{
			position: relative;
			z-index: 1;
			display: flex;
			align-items: center;
			justify-content: space-between;
			margin-bottom: 14px;
		}

		.title{
			font-size: 22px;
			letter-spacing: 0.5px;
			font-weight: 700;
		}

		.subtitle{
			font-size: 12px;
			text-transform: uppercase;
			letter-spacing: 1px;
			opacity: 0.7;
		}

		.panel{
			position: relative;
			z-index: 1;
			background: var(--card);
			border-radius: 18px;
			padding: 14px;
			box-shadow: 0 10px 24px var(--shadow);
			border: 1px solid rgba(0,0,0,0.08);
		}

		.stats{
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 10px;
			margin-bottom: 16px;
		}

		.stat{
			background: #fff;
			border-radius: 14px;
			padding: 10px;
			text-align: center;
			border: 1px solid rgba(0,0,0,0.08);
		}

		.stat h3{
			margin: 0;
			font-size: 12px;
			font-weight: 700;
		}

		.stat p{
			margin: 4px 0 0;
			font-size: 11px;
			text-transform: uppercase;
			letter-spacing: 0.8px;
			opacity: 0.7;
		}

		.stat.cotton{
			background: var(--cotton);
		}

		.stat.flax{
			background: var(--flax);
		}

		.stat.memoria{
			background: var(--memoria);
		}

		.selector{
			margin-bottom: 16px;
		}

		.selector h2{
			margin: 0 0 8px;
			font-size: 14px;
			text-transform: uppercase;
			letter-spacing: 1px;
			opacity: 0.7;
		}

		.plant-grid{
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 10px;
		}

		.plant-btn{
			border: 2px solid var(--ink);
			background: #fff;
			border-radius: 14px;
			padding: 10px;
			text-align: center;
			cursor: pointer;
			font-weight: 700;
			transition: transform 0.15s ease, background 0.2s ease;
		}

		.plant-btn span{
			display: block;
			font-weight: 500;
			font-size: 12px;
			opacity: 0.7;
			margin-top: 4px;
		}

		.plant-btn.active{
			background: var(--accent);
			color: #1a110c;
			transform: translateY(-2px);
		}

		.craft{
			margin-bottom: 16px;
		}

		.craft-header{
			display: flex;
			justify-content: space-between;
			align-items: flex-start;
			gap: 12px;
		}

		.craft-title{
			font-size: 16px;
			font-weight: 700;
		}

		.craft-sub{
			font-size: 12px;
			opacity: 0.7;
			margin-top: 4px;
		}

		.craft-count{
			font-size: 12px;
			text-transform: uppercase;
			letter-spacing: 0.8px;
			opacity: 0.7;
			background: #fff;
			padding: 6px 10px;
			border-radius: 999px;
			border: 1px solid rgba(0,0,0,0.08);
		}

		.craft-controls{
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 12px;
			flex-wrap: wrap;
			margin-top: 12px;
		}

		.craft-btn{
			flex: 1;
			min-width: 160px;
			padding: 12px 14px;
			border: 2px solid var(--ink);
			border-radius: 14px;
			background: #fff;
			font-weight: 700;
			cursor: pointer;
			transition: transform 0.15s ease, background 0.2s ease;
		}

		.craft-btn:active{
			transform: translateY(1px);
		}

		.craft-btn:disabled{
			opacity: 0.6;
			cursor: not-allowed;
		}

		.craft-queue{
			font-size: 12px;
			text-transform: uppercase;
			letter-spacing: 0.8px;
			opacity: 0.7;
		}

		.craft-status{
			font-size: 10px;
			opacity: 0.8;
			margin-top: 8px;
		}

		.farm{
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 12px;
		}

		.plot{
			border: 2px solid var(--ink);
			border-radius: 16px;
			background: linear-gradient(145deg, var(--soil), var(--soil-dark));
			aspect-ratio: 1 / 1;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			text-align: center;
			font-weight: 700;
			font-size: 13px;
			gap: 6px;
			cursor: pointer;
			box-shadow: inset 0 0 0 2px rgba(255,255,255,0.2);
			transition: transform 0.2s ease, background 0.3s ease;
		}

		.plot [hidden]{
			display: none;
		}

		.plot:active{
			transform: scale(0.98);
		}

		.plot-label{
			font-size: 16px;
		}

		.plot-time{
			font-size: 13px;
			font-weight: 600;
			opacity: 0.85;
		}

		.plot-badge{
			border: 2px solid var(--ink);
			border-radius: 999px;
			padding: 4px 14px;
			font-size: 14px;
			font-weight: 700;
			background: #fff;
		}

		.plot-badge.cotton{
			background: var(--cotton);
		}

		.plot-badge.flax{
			background: var(--flax);
		}

		.plot-badge.memoria{
			background: linear-gradient(90deg, #ff9ecb 0%, #ffd59a 25%, #fff2a8 50%, #bfe6ff 75%, #d9b8ff 100%);
			font-size: 12px;
		}

		.plot.growing{
			background: linear-gradient(145deg, var(--growing), #5f92bc);
		}

		.plot.ready{
			background: linear-gradient(145deg, var(--ready), #e5c05c);
			animation: pulse 1.5s ease-in-out infinite;
		}

		@keyframes pulse{
			0%, 100%{ transform: scale(1); }
			50%{ transform: scale(1.03); }
		}

		.footer{
			margin-top: 14px;
			font-size: 12px;
			text-align: center;
			opacity: 0.75;
		}

		@media (max-width: 360px){
			.app{
				padding: 16px 14px 22px;
			}

			.title{
				font-size: 20px;
			}

			.plot{
				border-radius: 12px;
				font-size: 12px;
			}

			.plot-badge{
				font-size: 13px;
			}
		}
	</style>
</head>
<body>
	<main class="app">
		<header class="header">
			<div>
				<div class="title">Plush Clicker Mobile</div>
			</div>
			<div class="subtitle">yay farm</div>
		</header>

		<section class="panel craft">
			<div class="craft-header">
				<div>
					<div class="craft-title">Kanade Plushie</div>
					<div class="craft-sub">Recipe: 5 Cotton|3 Flax|1 Memoria</div>
				</div>
				<div class="craft-count">Total: <span id="kanadeCount">0</span></div>
			</div>
			<div class="craft-controls">
				<button class="craft-btn" id="kanadeBtn" type="button">Start (1m)</button>
				<div class="craft-queue">Queue: <span id="kanadeQueue">0</span>/3</div>
			</div>
			<div class="craft-status" id="kanadeStatus">Idle</div>
		</section>

		<section class="stats">
			<div class="stat cotton">
				<h3 id="cottonCount">0</h3>
				<p>Cotton</p>
			</div>
			<div class="stat flax">
				<h3 id="flaxCount">0</h3>
				<p>Flax</p>
			</div>
			<div class="stat memoria">
				<h3 id="memoriaCount">0</h3>
				<p>Memoria</p>
			</div>
		</section>

		<section class="panel selector">
			<h2>Select plant</h2>
			<div class="plant-grid">
				<button class="plant-btn" data-plant="Cotton">
					Cotton
					<span>30s</span>
				</button>
				<button class="plant-btn" data-plant="Flax">
					Flax
					<span>2m</span>
				</button>
				<button class="plant-btn" data-plant="Memoria">
					Memoria
					<span>5m</span>
				</button>
			</div>
		</section>

		<section class="panel farm" id="farm" aria-label="Farm plots"></section>

		<div class="footer">Tap an empty plot to plant. Tap ready plots to harvest.</div>
	</main>

	<script>
		const PLANTS = {
			Cotton: 30,
			Flax: 120,
			Memoria: 300
		};

		const KANADE_RECIPE = {
			Cotton: 5,
			Flax: 3,
			Memoria: 1
		};

		const KANADE_TIME = 60;

		const harvestCounts = {
			Cotton: 0,
			Flax: 0,
			Memoria: 0
		};

		const countEls = {
			Cotton: document.getElementById("cottonCount"),
			Flax: document.getElementById("flaxCount"),
			Memoria: document.getElementById("memoriaCount")
		};

		let selectedPlant = null;
		const farm = document.getElementById("farm");

		const kanadeBtn = document.getElementById("kanadeBtn");
		const kanadeQueueEl = document.getElementById("kanadeQueue");
		const kanadeCountEl = document.getElementById("kanadeCount");
		const kanadeStatusEl = document.getElementById("kanadeStatus");
		let kanadeTotal = 0;
		let kanadeQueue = 0;
		let kanadeInProgress = false;
		let kanadeReady = false;
		let kanadeTimeLeft = 0;
		let kanadeTimer = null;

		const plots = [];
		for (let i = 0; i < 9; i++) {
			const plot = document.createElement("button");
			plot.type = "button";
			plot.className = "plot";
			plot.dataset.state = "empty";
			plot.innerHTML = "<div class=\"plot-badge\" hidden></div><div class=\"plot-label\">Empty</div><div class=\"plot-time\" hidden>Tap to plant</div>";
			farm.appendChild(plot);
			plots.push(plot);
		}

		document.querySelectorAll(".plant-btn").forEach(btn => {
			btn.addEventListener("click", () => {
				document.querySelectorAll(".plant-btn").forEach(b => b.classList.remove("active"));
				btn.classList.add("active");
				selectedPlant = btn.dataset.plant;
			});
		});

		plots.forEach(plot => {
			plot.addEventListener("click", () => {
				if (plot.dataset.state === "empty") {
					if (!selectedPlant) return;
					startPlant(plot, selectedPlant);
					return;
				}

				if (plot.dataset.state === "ready") {
					harvest(plot);
				}
			});
		});

		kanadeBtn.addEventListener("click", () => {
			if (kanadeReady) {
				collectKanade();
				return;
			}

			const totalQueued = kanadeQueue + (kanadeInProgress ? 1 : 0);
			if (totalQueued >= 3) return;
			if (!hasKanadeMaterials()) return;

			spendKanadeMaterials();
			if (kanadeInProgress) {
				kanadeQueue += 1;
				updateKanadeUI();
				return;
			}

			startKanadeCraft();
		});

		function startPlant(plot, plant) {
			let timeLeft = PLANTS[plant];
			plot.dataset.plant = plant;
			plot.dataset.state = "growing";
			plot.classList.add("growing");
			updatePlot(plot, plant, formatTime(timeLeft));

			const timer = setInterval(() => {
				timeLeft -= 1;
				updatePlot(plot, plant, formatTime(timeLeft));
				if (timeLeft <= 0) {
					clearInterval(timer);
					plot.dataset.state = "ready";
					plot.classList.remove("growing");
					plot.classList.add("ready");
					updatePlot(plot, plant, "Ready");
				}
			}, 1000);

			plot.dataset.timer = timer;
		}

		function harvest(plot) {
			const plant = plot.dataset.plant;
			if (plant && harvestCounts[plant] !== undefined) {
				harvestCounts[plant] += 1;
				updateHarvestDisplays();
			}

			plot.dataset.state = "empty";
			plot.classList.remove("ready");
			plot.dataset.plant = "";
			setEmptyPlot(plot);
		}

		function setEmptyPlot(plot) {
			const badge = plot.querySelector(".plot-badge");
			const label = plot.querySelector(".plot-label");
			const time = plot.querySelector(".plot-time");

			badge.hidden = true;
			badge.textContent = "";
			badge.classList.remove("cotton", "flax", "memoria");
			label.hidden = false;
			label.textContent = "Empty";
			time.hidden = true;
			time.textContent = "Tap to plant";
		}

		function updatePlot(plot, title, time) {
			const badge = plot.querySelector(".plot-badge");
			const label = plot.querySelector(".plot-label");
			const timeEl = plot.querySelector(".plot-time");
			const plantClass = title.toLowerCase();

			badge.hidden = false;
			badge.textContent = title;
			badge.classList.remove("cotton", "flax", "memoria");
			badge.classList.add(plantClass);
			label.hidden = true;
			timeEl.hidden = false;
			timeEl.textContent = time;
		}

		function updateHarvestDisplays() {
			Object.keys(countEls).forEach(key => {
				countEls[key].textContent = harvestCounts[key];
			});
			updateKanadeUI();
		}

		function hasKanadeMaterials() {
			return (
				harvestCounts.Cotton >= KANADE_RECIPE.Cotton &&
				harvestCounts.Flax >= KANADE_RECIPE.Flax &&
				harvestCounts.Memoria >= KANADE_RECIPE.Memoria
			);
		}

		function spendKanadeMaterials() {
			harvestCounts.Cotton -= KANADE_RECIPE.Cotton;
			harvestCounts.Flax -= KANADE_RECIPE.Flax;
			harvestCounts.Memoria -= KANADE_RECIPE.Memoria;
			updateHarvestDisplays();
		}

		function startKanadeCraft() {
			kanadeInProgress = true;
			kanadeReady = false;
			kanadeTimeLeft = KANADE_TIME;
			updateKanadeUI();

			if (kanadeTimer) {
				clearInterval(kanadeTimer);
			}

			kanadeTimer = setInterval(() => {
				kanadeTimeLeft -= 1;
				updateKanadeUI();
				if (kanadeTimeLeft <= 0) {
					clearInterval(kanadeTimer);
					kanadeInProgress = false;
					kanadeReady = true;
					kanadeTimeLeft = 0;
					updateKanadeUI();
				}
			}, 1000);
		}

		function collectKanade() {
			kanadeTotal += 1;
			kanadeCountEl.textContent = kanadeTotal;
			kanadeReady = false;

			if (kanadeQueue > 0) {
				kanadeQueue -= 1;
				startKanadeCraft();
				return;
			}

			updateKanadeUI();
		}

		function updateKanadeUI() {
			const totalQueued = kanadeQueue + (kanadeInProgress ? 1 : 0);
			const canQueue = totalQueued < 3 && hasKanadeMaterials() && !kanadeReady;

			kanadeQueueEl.textContent = kanadeQueue;

			if (kanadeReady) {
				kanadeBtn.textContent = "Ready to collect";
				kanadeBtn.disabled = false;
				kanadeStatusEl.textContent = "Ready to collect";
				return;
			}

			if (kanadeInProgress) {
				kanadeBtn.textContent = "In progress";
				kanadeBtn.disabled = !canQueue;
				kanadeStatusEl.textContent = "In progress: " + formatTime(kanadeTimeLeft);
				return;
			}

			kanadeBtn.textContent = "Start (1m)";
			kanadeBtn.disabled = !hasKanadeMaterials();
			kanadeStatusEl.textContent = "Idle";
		}

		function formatTime(totalSeconds) {
			const minutes = Math.floor(totalSeconds / 60);
			const seconds = totalSeconds % 60;
			if (minutes <= 0) return seconds + "s";
			return minutes + "m " + String(seconds).padStart(2, "0") + "s";
		}

		updateKanadeUI();
	</script>
</body>
</html>
